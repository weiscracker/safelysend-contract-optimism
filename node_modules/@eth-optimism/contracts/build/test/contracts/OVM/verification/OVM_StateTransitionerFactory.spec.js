"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const setup_1 = require("../../../setup");
const hardhat_1 = require("hardhat");
const helpers_1 = require("../../../helpers");
const DUMMY_HASH = helpers_1.hashTransaction(helpers_1.DUMMY_OVM_TRANSACTIONS[0]);
describe('OVM_StateTransitionerFactory', () => {
    let AddressManager;
    before(async () => {
        AddressManager = await helpers_1.makeAddressManager();
    });
    let Factory__OVM_StateTransitionerFactory;
    before(async () => {
        Factory__OVM_StateTransitionerFactory = await hardhat_1.ethers.getContractFactory('OVM_StateTransitionerFactory');
    });
    let OVM_StateTransitionerFactory;
    beforeEach(async () => {
        OVM_StateTransitionerFactory = await Factory__OVM_StateTransitionerFactory.deploy(AddressManager.address);
    });
    describe('create', () => {
        describe('when the sender is not the OVM_FraudVerifier', () => {
            before(async () => {
                await AddressManager.setAddress('OVM_FraudVerifier', helpers_1.ZERO_ADDRESS);
            });
            it('should revert', async () => {
                await setup_1.expect(OVM_StateTransitionerFactory.create(AddressManager.address, helpers_1.NULL_BYTES32, helpers_1.NULL_BYTES32, DUMMY_HASH)).to.be.revertedWith('Create can only be done by the OVM_FraudVerifier.');
            });
        });
    });
});
//# sourceMappingURL=OVM_StateTransitionerFactory.spec.js.map